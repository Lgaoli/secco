"use strict";$(function(){$(".login").on("click",function(){console.log(1),window.location.href="../html/login.html"}),$("#password1").blur(function(){$("#password").val()!=$("#password1").val()?($(".error").html("两次输入的密码不一致"),$(".error").css("color","red")):$(".error").html("")});var s=!0;$("#che").click(function(){1==$("#che").prop("checked")?$("#vip").css("display","block"):$("#vip").css("display","none")}),$.idcode.setCode(),$(".main-reg input").on("focus",function(){$(this).addClass("aci")}),$(".main-reg input").on("blur",function(){$(this).removeClass("aci")}),$("#username").on("blur",function(){var r=$("#username").val();$("#password").val();if(r){var e=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;e.test(r)||o.test(r)?e.test(r)?($(".yz").css("display","block"),$("#yzbtn").val("获取手机验证码"),$.ajax({type:"post",url:"../api/que.php",data:"username="+$("#username").val().trim(),success:function(r){"0"==JSON.parse(r)?($(".user-error").html("此用户号可注册"),$(".user-error").css({color:"#58bc58"},{"font-size":"12px"}),$("#verif").blur(function(){var r=$.idcode.validateCode();$(".user-error").html(r),"验证码正确！"==r?(console.log("验证码正确！"),$(".user-error").html(r),$(".reg-btn").on("click",function(){$("#password").val()==$("#password1").val()?(console.log(s),s=(s?(console.log(1),$.ajax({type:"post",url:"../api/reg.php",data:"username="+$("#username").val()+"&password="+$("#password").val(),success:function(r){console.log(r)}})):$(".user-error").val("用户已存在"),!1)):$(".error").val("两次密码不一致")})):$(".user-error").html(r)})):($(".user-error").html("此用户号已存在"),$(".user-error").css({color:"red"},{"font-size":"12px"}))}})):o.test(r)&&($(".yz").css("display","block"),$("#yzbtn").val("获取邮箱验证码"),$("#verif").blur(function(){var r=$.idcode.validateCode();$(".user-error").html(r),$(".user-error").html(r)}),$.ajax({type:"post",url:"../api/que.php",data:"username="+$("#username").val().trim(),success:function(r){"0"==JSON.parse(r)?($(".user-error").html("此用户号可注册"),$(".user-error").css({color:"#58bc58"},{"font-size":"12px"}),$("#verif").blur(function(){var r=$.idcode.validateCode();$(".user-error").html(r),"验证码正确！"==r?(console.log("验证码正确！"),$(".user-error").html(r),$(".reg-btn").on("click",function(){$("#password").val()==$("#password1").val()?(console.log(s),s=(s?(console.log(1),$.ajax({type:"post",url:"../api/reg.php",data:"username="+$("#username").val()+"&password="+$("#password").val(),success:function(r){window.location.href="../html/login.html"}})):$(".user-error").val("用户已存在"),!1)):$(".error").val("两次密码不一致")})):$(".user-error").html(r)})):($(".user-error").html("此用户号已存在"),$(".user-error").css({color:"red"},{"font-size":"12px"}))}})):($(".user-error").html("请输入正确的手机号或者邮箱"),$(".user-error").css({color:"red"},{"font-size":"12px"}))}else $(".user-error").html("用户号不能为空"),$(".user-error").css({color:"red"},{"font-size":"12px"})})});